<Window x:Class="EasySave.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EasySave"
        mc:Ignorable="d"
        Title="EasySave"
        Height="500"
        Width="900"
        Background="#F5F7FA"
        FontFamily="Segoe UI">

    <!-- ======================= -->
    <!--        STYLES           -->
    <!-- ======================= -->

    <Window.Resources>

        <!-- Couleurs -->
        <SolidColorBrush x:Key="PrimaryColor" Color="#4F46E5"/>
        <SolidColorBrush x:Key="PrimaryHoverColor" Color="#4338CA"/>
        <SolidColorBrush x:Key="BorderColor" Color="#E5E7EB"/>
        <SolidColorBrush x:Key="TextColor" Color="#1F2937"/>

        <!-- TextBlock -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <!-- TextBox -->
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <!-- ComboBox -->
        <Style TargetType="ComboBox">
            <Setter Property="Padding" Value="6"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>

        <!-- Button -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background"
                                        Value="{StaticResource PrimaryHoverColor}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.85"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- DataGrid -->
        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="RowBackground" Value="White"/>
            <Setter Property="AlternatingRowBackground" Value="#F9FAFB"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
        </Style>

        <!-- DataGrid Header -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background" Value="#EEF2FF"/>
            <Setter Property="Foreground" Value="{StaticResource TextColor}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderColor}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
        </Style>

    </Window.Resources>

    <!-- ======================= -->
    <!--        LAYOUT           -->
    <!-- ======================= -->

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Liste des backups -->
        <DataGrid Grid.Row="0"
                  ItemsSource="{Binding Backups}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  Margin="0,0,0,15">

            <DataGrid.Columns>
                <DataGridCheckBoxColumn Header="Sélection"
                                        Binding="{Binding IsSelected}" />
                <DataGridTextColumn Header="Id"
                                    Binding="{Binding Id}" />
                <DataGridTextColumn Header="Nom"
                                    Binding="{Binding Name}" />
                <DataGridTextColumn Header="Source"
                                    Binding="{Binding SourceFilePath}" />
                <DataGridTextColumn Header="Destination"
                                    Binding="{Binding DestinationFilePath}" />
                <DataGridTextColumn Header="Dernière sauvegarde"
                                    Binding="{Binding LastBackupDateTime}" />
                <DataGridTextColumn Header="Type"
                                    Binding="{Binding Type}" />
            </DataGrid.Columns>
        </DataGrid>

        <!-- Formulaire création backup -->
        <Grid Grid.Row="1" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Nom -->
            <StackPanel Grid.Column="0" Margin="5">
                <TextBlock Text="Nom" />
                <TextBox Text="{Binding BackupCreateRequest.Name, Mode=TwoWay}" />
            </StackPanel>

            <!-- Source -->
            <StackPanel Grid.Column="1" Margin="5">
                <TextBlock Text="Source" />
                <TextBox Text="{Binding BackupCreateRequest.SourceFilePath, Mode=TwoWay}" />
            </StackPanel>

            <!-- Destination -->
            <StackPanel Grid.Column="2" Margin="5">
                <TextBlock Text="Destination" />
                <TextBox Text="{Binding BackupCreateRequest.DestinationFilePath, Mode=TwoWay}" />
            </StackPanel>

            <!-- Type -->
            <StackPanel Grid.Column="3" Margin="5">
                <TextBlock Text="Type" />
                <ComboBox ItemsSource="{Binding BackupTypes}"
                          SelectedItem="{Binding BackupCreateRequest.Type, Mode=TwoWay}" />
            </StackPanel>

            <!-- Bouton créer -->
            <Button Grid.Column="4"
                    Content="Créer une backup"
                    Margin="5"
                    Width="160"
                    Command="{Binding CreateBackupCommand}" />

            <!-- Bouton exécuter -->
            <Button Grid.Column="5"
                    Content="Exécuter les backups sélectionnés"
                    Margin="5"
                    Width="260"
                    Command="{Binding ExecuteBackupsCommand}" />
        </Grid>
    </Grid>
</Window>
